<?php

/**
 * NotificationsTable
 * 
 * This class has been auto-generated by the Doctrine ORM Framework
 */
class NotificationsTable extends Doctrine_Table
{
    /**
     * Returns an instance of this class.
     *
     * @return object NotificationsTable
     */
    public static function getInstance()
    {
        return Doctrine_Core::getTable('Notifications');
    }
	//count user notifications
	public function countNotifications($username)
	{
	  $query = Doctrine_Manager::getInstance()->getCurrentConnection()->fetchAssoc("
	 SELECT COUNT(notifications.message) FROM notifications WHERE notifications.recepient = '$username' 
	 ");
	 return $query;
	}
	//get the notification for this user
	public function getNotifications($username)
	{
	  $query = Doctrine_Manager::getInstance()->getCurrentConnection()->fetchAssoc("
	 SELECT notifications.message,notifications.created_at FROM notifications WHERE notifications.recepient = '$username'
	 ORDER BY notifications.created_at DESC
	 ");
	 return $query;
	}
}